{% extends 'base.html' %}
{% block content %}
{% load static %}

<div class="container mt-5">
  <div class="card mb-4 custom-shadow">
      <div class="row">
          <!-- Миниатюры -->
          <div class="col-md-5">
            {% if product.photo %}
              <img src="{{ product.photo.url }}"
                  class="img-thumbnail" data-bs-toggle="modal" data-bs-target="#imageModal1" alt='{{ tovar_slug }}'>
            {% endif %}
          </div>
          <div class="col-md-5">
              <p class="product_id mt-3">id: {{ product.display_id }}</p>
          </div>
          <!-- Увеличить изображение в модальном окне -->
          <div class="modal fade" id="imageModal1" tabindex="-1"
              aria-labelledby="imageModal1Label" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h5 class="modal-title" id="imageModal1Label">{{ product.title }}</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal"
                              aria-label="Закрыть"></button>
                      </div>
                      <div class="modal-body">
                          <img src="{{ product.photo.url }}"
                              class="img-fluid" alt="Изображение 1">
                      </div>
                  </div>
              </div>
          </div>
      </div>
      

      {% comment %} {% if product.photo %}
        <p><img src="{{ product.photo.url }}"   class="card-img-top"  alt='{{ tovar_slug }}'></p>
      {% endif %} {% endcomment %}
      <div class="card-body">
        <!-- Описание товара -->
        <div class="card-body">
          <p class="card-text">Цена: <strong>{{ product.sell_price }} $</strong></p>
          <h5 class="card-title">{{ product.title }}, {{ product.slug }}</h5>
          <p class="card-text">{{ product.content|linebreaks }}</p>
          <a href="{% url "carts:cart_add" %}" class="btn btn-primary add-to-cart"
          data-product-id="{{ product.id }}">
          {% csrf_token %}
          Добавить в корзину</a>
        </div>


        {% if perms.pract.change_goods %}
          <p>Вносил изменения в эту продукцию: {{ product.author.username|default:"неизвестно" }}</p>
          <a href="{% url 'UpdateGoodsView' product.slug %}" class="btn btn-primary">UpdateGoodsView</a>
        {% endif %}

        {% if perms.pract.delete_goods %}
          <a href="{% url 'DeleteGoodsView' product.slug %}" class="btn btn-primary">DeleteGoodsView</a>
        {% endif %}
        
      </div>
  </div>
</div>

{% endblock %}